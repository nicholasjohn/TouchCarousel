(function(){$.fn.touchCarousel=function(e){$this=this;this.wrap($("<div />").addClass("tc-root js-tc-root"));$tcRoot=this.parents(".tc-root");var t=$.extend({slideDuration:4e3,transitionDuration:250,easing:"swing",width:"100%",autoResizeTabs:true},e);var n=t.slideDuration,r=t.transitionDuration,i=t.easing,s=t.width;if(s=="100%"){$tcRoot.css("width","100%");s=$tcRoot.width()}else{s=parseInt(s,10);$tcRoot.width(s)}var o=$(".tc-tab").length;if($(".tc-tabs").length<1){$(".tc-tab").wrapAll("<div>")}var u=$('<div class="tc-reel js-tc-reel" />').width(o*s);$touchItem=$('<div class="tc-item js-tc-item" />').append(u);$tcRoot.prepend($touchItem);$(".tc-root .tc-tab").each(function(e,n){if(t.autoResizeTabs===true)$(this).css("width",$tcRoot.width()/o);var r=$(this).clone().html();r=$(r);r.find(".tc-tab-only").remove();if(r.data("carousel")!=="undefined"){r.attr("src",r.data("carousel"))}r.find("img[data-carousel]").each(function(){$(this).attr("src",$(this).data("carousel"))});$(this).find(".tc-hero-only").remove();$heroItem=$("<div>").width(s).addClass("article").append(r);u.append($heroItem);var i=$("<div>").addClass("reel-timer-overlay js-reel-timer-overlay"),a=$("<div>").addClass("reel-timer").append(i);$(this).addClass("js-tc-tab").attr("data-slide",e+1).prepend(a)});var a=0,f=1,l=false,c=0,h;this.resetCarousel=function(){a=0,f=1,l=false,c=0;this.goToSlide(f);clearTimeout(h);h=setTimeout(this.nextSlide,n)};this.updateMargin=function(t){var n=t===1?0:t-1,s=-(n*$(".js-tc-item").width());u.stop().animate({"margin-left":s},r,i)};this.goToSlide=function(t){$(".tc-tab.active").removeClass("active");$(".animating").removeClass("animating");$('.tc-tab[data-slide="'+t+'"]').addClass("active").find(".js-reel-timer-overlay").addClass("animating");this.updateMargin(t)};this.nextSlide=function(){if(!l){$this.goToSlide(f);clearTimeout(h);h=setTimeout($this.nextSlide,n);if(f+1>o){f=1;a=o}else{a=f;f++}}};this.prevSlide=function(){if(!l){if(a-1===0){f=1;a=o}else{f=a;a--}$this.goToSlide(a);clearTimeout(h);h=setTimeout($this.nextSlide,n)}};$(".js-tc-tab").hover(function(){clearTimeout(h);$this.goToSlide($(this).data("slide"));a=$(this).data("slide");if(a+1>o){f=1}else{f=a+1}l=true;$(this).find(".js-reel-timer-overlay").removeClass("animating").addClass("full")},function(){l=false;$(this).find(".full").removeClass("full").width(0).addClass("animating");h=setTimeout($this.nextSlide,n)});this.init=function(){u.show();$(".js-reel-timer-overlay:first-of-type").width(0);setTimeout($this.nextSlide,50);return this};$(window).on("exit.two-col enter.two-col",function(){c=$(".tc-root .tc-tab:first-child").width();this.updateMargin(a)}).on("resize",function(){s=this.width();$(".js-tc-reel").width(o*s);$(".js-tc-reel .article").width(s);this.updateMargin(a)});var p,d,v,m,g,y,b,w=false,E=false;u.on("touchstart",function(e){l=true;y=u.css("margin-left");p=e.originalEvent.touches[0].pageX;d=e.originalEvent.touches[0].pageY;$(this).on("touchmove",function(e){v=e.originalEvent.touches[0].pageX;m=e.originalEvent.touches[0].pageY;if(Math.abs(v-p)>Math.abs(m-d)||E===true){e.preventDefault();E=true;g=v-p;b=parseInt(y,10)+g;$heroMargin=parseInt(u.css("margin-left"),10);if($heroMargin>=0){u.css({"margin-left":b*.2})}else if($heroMargin<=-($(".js-tc-item").width()*3)){u.css({"margin-left":parseInt(y,10)+g*.2})}else{u.css({"margin-left":b})}$(".js-tc-tab.active").find(".js-reel-timer-overlay").removeClass("animating").addClass("full")}else{$(this).off("touchend");$(this).off("touchmove");w=true}});$(this).on("touchend",function(e){E=false;$(this).off("touchend");$(this).off("touchmove");$(".js-tc-tab.active").find(".full").removeClass("full").width(0).addClass("animating");l=false;if(Math.abs(g)<20||w===true){u.animate({"margin-left":y});w=false}else{if(b<parseInt(y,10)){if(a!==o){clearTimeout(h);this.nextSlide()}else{this.goToSlide(o);clearTimeout(h);h=setTimeout(this.nextSlide,n)}}else{if(a!==1){clearTimeout(h);this.prevSlide()}else{$tcRoot.goToSlide(1);clearTimeout(h);h=setTimeout(this.nextSlide,n)}}}g=0;p=0;d=0;m=0;v=0;y=0;b=0;w=false;E=false})});return this.init()}})()