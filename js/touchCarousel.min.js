(function(){$.fn.touchCarousel=function(e){var t=this;this.wrap($("<div />").addClass("tc-root js-tc-root"));var n=this.parents(".tc-root");var r=$.extend({slideDuration:4e3,transitionDuration:250,easing:"swing",width:"100%",autoResizeTabs:true,showTimers:true,showTabs:true,heroHoverPause:true,tabsHoverPause:true,hoverActive:true,visibleTabs:false,highlightTabs:true,onTimer:"hero",directionKeys:true},e);var i=r.slideDuration,s=r.transitionDuration,o=r.easing,u=r.width,a=r.visibleTabs;if(u=="100%"){n.css("width","100%");u=n.width()}else{u=parseInt(u,10);n.width(u)}var f=$(".tc-tab").length;if($(".tc-tabs").length<1){$(".tc-tab").wrapAll("<div>")}var l=$('<div class="tc-hero-reel js-tc-hero-reel" />').css("width",f*u),c=$('<div class="tc-hero-wrapper js-tc-hero-wrapper" />').append(l),h=$('<div class="tc-arrow-left js-tc-arrow-left" />'),p=$('<div class="tc-arrow-right js-tc-arrow-right" />');n.prepend(c).append(h).append(p);$(".tc-tab").each(function(e,t){var r=$(this);r.css("width",Math.floor((n.width()-parseInt($(this).css("margin-left"),10)-parseInt($(this).css("margin-right"),10))/a));var i=r.children().clone();i.find(".tc-tab-only").remove();r.find(".tc-hero-only").remove();if(i.data("carousel")!=="undefined"){i.attr("src",i.data("carousel"))}i.find("img[data-carousel]").each(function(){$(this).attr("src",$(this).data("carousel"))});var s=$("<div>").width(u).addClass("tc-hero-item js-tc-hero-item").addClass("js-tc-tab").attr("data-slide",e+1).append(i);l.append(s);r.addClass("js-tc-tab").attr("data-slide",e+1)});var d=0,v=1,m=false,g=0,y=0,b;this.resetCarousel=function(){d=0,v=1,m=false,g=0;this.goToSlide(v);clearTimeout(b);b=setTimeout(this.nextSlide,i)};this.updateMargin=function(t){l.css("width",f*u);$(".js-tc-hero-item").width(n.width());if(t>1){$m=t-1}else{$m=0}var r=-($m*n.width());l.stop().animate({"margin-left":r},s,o);var i=(parseInt($(".tc-tab:first-child").css("margin-left"),10)+parseInt($(".tc-tab:first-child").css("margin-right"),10))*(a-1);var c=Math.floor((n.width()-i)/a);$(".tc-tab").css("width",c);var h=Math.floor($(".tc-tab:first-child").width()+parseInt($(".tc-tab:first-child").css("margin-left"),10)+parseInt($(".tc-tab:first-child").css("margin-right"),10))*y;$(".tc-tabs").stop().animate({"margin-left":h+"px"},s)};this.goToSlide=function(t){$(".tc-tab.active").removeClass("active");this.updateMargin(t)};this.slideTabs=function(n){if(!m){clearTimeout(b);if(n==="left"||n==="undefined"){y++;if(y===1)y=-(f-a)}else{y--;if(y===-(f-a+1))y=0}var r=Math.floor($(".tc-tab:first-child").width()+parseInt($(".tc-tab:first-child").css("margin-left"),10)+parseInt($(".tc-tab:first-child").css("margin-right"),10))*y;$(".tc-tabs").stop().animate({"margin-left":r+"px"},s);b=setTimeout(t.slideTabs,i)}};this.nextSlide=function(){if(!m){t.goToSlide(v);clearTimeout(b);b=setTimeout(t.slideTabs,i);if(v+1>f){v=1;d=f}else{d=v;v++}}};this.prevSlide=function(){if(!m){if(d-1===0){v=1;d=f}else{v=d;d--}t.goToSlide(d);clearTimeout(b);b=setTimeout(t.slideTabs,i)}};this.init=function(){$(".js-reel-timer-overlay:first-of-type").width(0);t.goToSlide(v);b=setTimeout(t.slideTabs,i);return this};if(r.hoverActive){$(".js-tc-tab").hover(function(){if(r.tabsHoverPause){clearTimeout(b);t.goToSlide($(this).data("slide"));d=$(this).data("slide");if(d+1>f){v=1}else{v=d+1}m=true}},function(){if(r.tabsHoverPause){m=false;b=setTimeout(t.slideTabs,i)}})}$(window).on("resize load",function(){if($(window).width()<740){a=4}else{a=3}t.updateMargin()});h.on("click",function(){t.slideTabs("left")});p.on("click",function(){t.slideTabs("right")});if(r.directionKeys===true){$(document.documentElement).keyup(function(e){if(e.keyCode==37){t.slideTabs("left")}else if(e.keyCode==39){t.slideTabs()}})}var w,E,S,x,T,N,C,k=false,L=false;$(".tc-tabs").on("touchstart",function(e){m=true;N=$(".tc-tabs").css("margin-left");w=e.originalEvent.touches[0].pageX;E=e.originalEvent.touches[0].pageY;$(this).on("touchmove",function(e){S=e.originalEvent.touches[0].pageX;x=e.originalEvent.touches[0].pageY;if(Math.abs(S-w)>Math.abs(x-E)||L===true){e.preventDefault();L=true;T=S-w;C=parseInt(N,10)+T;$tabsMargin=parseInt($(".tc-tabs").css("margin-left"),10);if($tabsMargin>=0){$(".tc-tabs").css({"margin-left":C*.2})}else if($tabsMargin<=-($(".js-tc-hero-wrapper").width()*3)){$(".tc-tabs").css({"margin-left":parseInt(N,10)+T*.2})}else{$(".tc-tabs").css({"margin-left":C})}}else{$(this).off("touchend");$(this).off("touchmove");k=true}});$(this).on("touchend",function(e){L=false;$(this).off("touchend");$(this).off("touchmove");var n=parseInt($(".tc-tabs").css("margin-left"),10),r=$(".tc-tab:first-child").width(),s=n%(r+parseInt($(".tc-tab:first-child").css("margin-right"),10));if(s>0){$(".tc-tabs").animate({"margin-left":0},"fast")}else if(Math.abs(s)<Math.floor(r/2)){$(".tc-tabs").animate({"margin-left":n+Math.abs(s)},"fast")}else{$(".tc-tabs").animate({"margin-left":n-(r+s)},"fast")}clearTimeout(b);m=false;b=setTimeout(t.slideTabs,i);T=0;w=0;E=0;x=0;S=0;N=0;C=0;k=false;L=false})});return this.init()}})()